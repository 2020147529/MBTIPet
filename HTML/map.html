<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MBTI Pet - ë‹¹ì‹ ê³¼ ì˜ ë§ëŠ” ìœ ê¸°ê²¬ ì¹œêµ¬ëŠ”?</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap"
      rel="stylesheet"
    />
    <link href="../CSS/map.css" type="text/css" rel="stylesheet" />
    <script src="../SCRIPT/api.js"> </script>
  </head>
  <body>
    <div class="header">
      <span class="header-text"><a href="input_MBTI.html">MBTI Pet</a></span>
    </div>
    <div class="inner">
      <div id="profile-container">
        <div id="profile-title">ë‹¹ì‹ ê³¼ ì˜ ë§ëŠ” ìœ ê¸°ê²¬ ì¹œêµ¬ëŠ”?</div> 
        <div id="profile-card">
          <div id="text-container">
            <div class="profile-text">ì´ë¦„ : ë§ˆë£¨</div>
            <div class="profile-text">ë‚˜ì´ : 10(ì„¸) 11(ê°œì›”)</div>
            <div class="profile-text">ì„±ë³„ : ìˆ˜ì»·</div>
            <div class="profile-text">ì¢… : ë§í‹°ì¦ˆ</div>
            <div class="profile-text">
              <span class="emoji">ğŸ‘‰ </span
              ><a
                href="https://youtu.be/pW_gn6vB3i8"
                target="_blank"
                id="youtube-link"
                >ì†Œê°œì˜ìƒ ë°”ë¡œê°€ê¸°</a>
            </div>
          </div>
          <div id="image-container"></div>
        </div>
      </div>
      <div id="map-container">
        <div id="map-title">ê°€ê¹Œìš´ ìœ ê¸°ê²¬ë³´í˜¸ì„¼í„° ì°¾ê¸°</div>
        <div id="map" style="width:500px;height:400px;"></div>
        <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=7wlont75cn"></script>
        <script>
          navigator.geolocation.getCurrentPosition(function (pos) {
          map = new naver.maps.Map('map', {
            center: new naver.maps.LatLng(36.31175, 127.3754709),
            zoom: 13
          });
          console.log(pos);
          var latitude = pos.coords.latitude;
          var longitude = pos.coords.longitude;
          console.log(latitude, longitude);


          var centerlocation = new naver.maps.LatLng(latitude, longitude);
          var markers = [];
          var infowindows = [];

          //ì‚¬ìš©ìì˜ ìœ„ì¹˜ë¥¼ ê¸°ë³¸ ë§ˆì»¤ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.
          markers.push(new naver.maps.Marker({
            map: map,
            position: centerlocation,

          }))

          //ì‚¬ìš©ìì˜ ìœ„ì¹˜ì— ì°½ì„ í‘œì‹œí•©ë‹ˆë‹¤.
          infowindows.push(new naver.maps.InfoWindow({
            content: [
              '<div class="iw_inner">',  //ì •ë³´ì°½ì— ì‚½ì…ë  ë‚´ìš©ì„ ê¸°ìˆ í•©ë‹ˆë‹¤.
              '   <h3> í˜„ì¬ ë‚˜ì˜ ìœ„ì¹˜ </h3>',
              '</div>'
            ].join('')
          }))

          //ì´í•˜ëŠ” ìœ ê¸°ê²¬ ë³´í˜¸ì†Œì˜ ì •ë³´ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë‘ ë°°ì—´ì— ì •ë³´ë¥¼ ì‚½ì…í•˜ë©´ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤.
          const markerimg1 = new Image();
          const infoimg1 = new Image();
          markerimg1.src = "https://animal.seoul.go.kr/comm/getImage?srvcId=MEDIA&upperNo=1121&fileTy=ADOPTIMG&fileNo=8&thumbTy=L"; 
          //ë§ˆì»¤ì— ì‚½ì…ë  ì´ë¯¸ì§€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
          infoimg1.src = "https://animal.seoul.go.kr/comm/getImage?srvcId=MEDIA&upperNo=1121&fileTy=ADOPTIMG&fileNo=8&thumbTy=L"; 
          //ë§ˆì»¤ë¥¼ ì„ íƒí•  ë•Œ í‘œì‹œë˜ëŠ” ì°½ì— ë„£ì„ ì´ë¯¸ì§€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

          //
          markers.push(new naver.maps.Marker({
            map: map,
            position: new naver.maps.LatLng(latitude - 0.01000, longitude - 0.0030),  //ìœ ê¸°ê²¬ ë³´í˜¸ì†Œì˜ ìœ„ë„ì™€ ê²½ë„ë¥¼ ë„£ì–´ì•¼í•©ë‹ˆë‹¤.
            icon: {
              url: markerimg1.src,
              size: new naver.maps.Size(70, 70),
              scaledSize: new naver.maps.Size(70, 70),
              origin: new naver.maps.Point(0, 0)
            }
          }))

          //ë§ˆì»¤ ì •ë³´ ì‚½ì…
          infowindows.push(new naver.maps.InfoWindow({
            content: [
              '<div class="iw_inner">',  //ìœ ê¸°ê²¬ ë³´í˜¸ì†Œì˜ ì •ë³´ë¥¼ ê¸°ìˆ í•©ë‹ˆë‹¤.
              '   <img src=',
              infoimg1.src,
              ' width="100px">',
              '<p>ë©ë©ì´</p>',
              '</div>'
            ].join('')
          }))

          //ì´ìƒì€ ìœ ê¸°ê²¬ ë³´í˜¸ì†Œì˜ ì •ë³´ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. ìœ„ì™€ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë‘ ë°°ì—´ì— ì •ë³´ë¥¼ ì‚½ì…í•˜ë©´ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤.

          for (let i = 0; i < markers.length; i++) {
            naver.maps.Event.addListener(markers[i], "click", function (e) {
              if (infowindows[i].getMap()) {
                infowindows[i].close();
              } else {
                infowindows[i].open(map, markers[i]);
              }
            });
          }

          infowindows[0].open(map, markers[0]);

        })
          </script>
      </div>

  </body>
</html>
